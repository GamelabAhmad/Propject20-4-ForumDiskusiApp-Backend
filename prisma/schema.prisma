// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  MODERATOR
  USER
}

model User {
  uuid       String   @id @default(cuid())
  username   String   @unique
  password   String
  email      String   @unique
  name       String? //pada edit profil
  bio        String? //pada edit profil
  avatar     String?
  dateJoined DateTime @default(now()) //default saat create
  role       Role     @default(USER) //default saat create
  topic      Topics[]
  Forums     Forums[]
}

model Topics {
  uuid          String      @id @default(cuid())
  name          String      @unique
  slug          String
  createdAt     DateTime    @default(now())
  createdBy     User        @relation(fields: [createdByUser], references: [uuid])
  createdByUser String
  Questions     Questions[]
}

model Forums {
  uuid        String      @id @default(cuid())
  name        String      @unique
  slug        String
  description String      @db.Text
  createdAt   DateTime    @default(now())
  UserId      String
  createdBy   User        @relation(fields: [UserId], references: [uuid])
  Questions   Questions[]
}

model Questions {
  uuid      String   @id @default(cuid())
  title     String
  body      String
  slug      String
  createdAt DateTime @default(now())
  imageUrl  String // Field untuk menyimpan URL gambar dari Cloudinary
  forumID   String
  topicsID  String? // Field ini diisi nanti diquestions yang didalam forum

  forum Forums @relation(fields: [forumID], references: [uuid])
  topic Topics? @relation(fields: [topicsID], references: [uuid])
}
